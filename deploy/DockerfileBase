# 基于Blog基础镜像快速构建
FROM registry.cn-hangzhou.aliyuncs.com/ljn_docker_hub/blog-base:v1
WORKDIR /root/
COPY hongDou ./hongDou
RUN chmod +x ./hongDou/blog/* ./hongDou/comment/* ./hongDou/user/* ./hongDou/gateway/* ./hongDou/tool/* ./hongDou/*
WORKDIR /root/hongDou/
EXPOSE 8080 3306 6379 8099 8500 15672 27017 8036 8033
RUN cp -f ./nginx.conf /etc/nginx/nginx.conf && \
    service mysql start &&  \
    mysql -u root -p123456 hongDou < ./sql/blog.sql
CMD ./start_all.sh
